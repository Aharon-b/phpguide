function sendcomment(xhr){return isguest?(xhr.abort(),unauth_message("comment"),!1):(show_comments_alert("","hide"),""==jQuery.trim(jQuery("#commenttext").val())?(jQuery("#commenttext").addClass("error"),xhr.abort(),void 0):(jQuery("#comments_form").hide(),jQuery("#comments_loading_img").show(),void 0))}function nl2br(str,is_xhtml){var breakTag=is_xhtml||is_xhtml===void 0?"<br />":"<br>";return(str+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+breakTag+"$2")}function comment_sumbitted_callback(response){jQuery("#comments_loading_img").hide(),"error"==response?show_comments_alert("התרחשה שגיאה. אנא נסו שוב.","error"):"spam"==response?show_comments_alert("יש להמתין 15 שניות בין תגובה לתגובה","warn"):(show_comments_alert("תגובתך נוספה! תודה","ok"),jQuery("#post_comments").append(response),jQuery("#commenttext").val("")),jQuery("#comments_form").show(),document.location.hash="comments_form"}function show_comments_alert(message,type){switch(type){case"hide":jQuery("#comments_alert").hide();break;case"warn":jQuery("#comments_alert").text(message).attr("class","alert alert-warning").fadeIn();break;case"error":jQuery("#comments_alert").text(message).attr("class","alert alert-error").fadeIn("slow");break;case"ok":jQuery("#comments_alert").text(message).attr("class","alert alert-success").fadeIn("slow")}}function expand_forum_question_textarea(){var val=jQuery.trim($("#forum_question_subject").val()).replace("\r","\n")+"",length=val.length,display=$("#forum_question_controls").css("display");length>0&&"inline"!=display&&(jQuery("#forum_question_text").show(),jQuery("#forum_question_controls").css("display","inline"),bbcodes_loaded||(bbcodes_loaded=!0,load("/static/scripts/bbcode.js"))),1>length&&"inline"==display&&(jQuery("#forum_question_text").hide(),jQuery("#forum_question_controls").hide())}function disable_new_question_form(xhr){return isguest?(xhr.abort(),unauth_message("qnaQuestion"),!1):5>$.trim(jQuery("#forum_question_subject").val()).length?(alert("נושא השאלה חייב להיות בעורך של חמישה תווים לפחות"),!1):(jQuery("#forum_question_text").prop("disabled",!0),jQuery("#forum_question_subject").prop("disabled",!0),void 0)}function new_question_submitted_callback(response){jQuery("#forum_question_text").prop("disabled",!1).val(""),jQuery("#forum_question_subject").prop("disabled",!1).val(""),"err::"===response.substr(0,5)?alert(response.substr(5)):document.location=response}function unauth_message(type){var comment="להוסיף את התגובה שלך",article="לפרסם את המדריך שלך",qnaQuestion="לקבל תשובות לשאלה שלך",qnaAnswer="לענות על השאלה",vote="לדרג",default1="לעשות את זה";switch(type){case"comment":show_unauth_message(comment,!0);break;case"article":show_unauth_message(article,!0);break;case"qnaQuestion":show_unauth_message(qnaQuestion,!0);break;case"qnaAnswer":show_unauth_message(qnaAnswer,!0);break;case"vote":show_unauth_message(vote,!1);break;default:show_anauth_message(default1,!0)}}function show_unauth_message(text,show_preserving_forms_message){$("#unauth_operation_description").text(text);var preserve=$("#unauth_operation_form_preserving_info");show_preserving_forms_message?preserve.show():preserve.hide(),$("#only_auth_users_allowed_popup").show()}function getStyle(a,b){var c=jQuery(a);return c.currentStyle?c.currentStyle[b]:window.getComputedStyle?document.defaultView.getComputedStyle(c,null).getPropertyValue(b):null}function getScrollXY(){var a=0,b=0;return"number"==typeof window.pageYOffset?(b=window.pageYOffset,a=window.pageXOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(b=document.body.scrollTop,a=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(b=document.documentElement.scrollTop,a=document.documentElement.scrollLeft),{left:a,top:b}}function get_elements_top(a,b){var c=0,d=0;if(a&&a.offsetParent)do c+=a.offsetTop||0,c-=a.scrollTop||0,d+=a.offsetLeft||0,d-=a.scrollLeft||0;while(a=a.offsetParent);return b?{top:c,left:d}:c}function getWindowHeight(){return winH=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:document.body&&document.body.clientHeight?document.body.clientHeight:1e4}function removeEvent(a,b,c){window.removeEventListener?a.removeEventListener(b,c,!1):window.attachEvent&&a.detachEvent("on"+b,c)}function addEvent(a,b,c){if(window.addEventListener)a.addEventListener(b,c,!1);else if(window.attachEvent)a.attachEvent("on"+b,c);else{var d=a["on"+b];a["on"+b]=function(){d(),c()}}}var bbcodes_loaded=!1,instances={},winH,LazyImg=function(a,b){var c,d;return a=a||document,b=b||200,winH||(getWindowHeight(),addEvent(window,"resize",getWindowHeight)),d={init:function(){return c="scan",last=0,addEvent(window,"scroll",d.fetchImages),d.fetchImages(),this},destroy:function(){removeEvent(window,"scroll",d.fetchImages)},fetchImages:function(){var e,f,g,h;if(a){if("scan"===c){if(f=a.getElementsByTagName("img"),!f.length)return;for(c=[],g=f.length,h=0;g>h;h++)e=f[h],1===e.nodeType&&e.getAttribute("title")&&(e.jQueryjQuerytop=get_elements_top(e,!1),c.push(e))}for(h=0;c.length>h;h++)e=c[h],e.jQueryjQuerytop<winH+b+getScrollXY().top&&(e.src=e.getAttribute("title"),e.setAttribute("title",e.getAttribute("alt")),c.splice(h--,1));0==c.length&&d.destroy()}}},d.init()};LazyImg(),jQuery("#forum_question_subject").length>0&&(jQuery("#forum_question_subject").keyup(expand_forum_question_textarea),""==document.location.hash&&jQuery("#forum_question_subject").focus(),top_of_question_form=jQuery("#forum_question_subject").offset().top-50),jQuery("#search_field").keypress(function(ev){(10==ev.keyCode||13==ev.keyCode)&&jQuery("#search_form").submit()}),jQuery("#commenttext").length>0&&jQuery("#commenttext").keyup(function(e){!e.ctrlKey||10!=e.keyCode&&13!=e.keyCode||jQuery("#addCommentBtn").click()}),jQuery(".auth_window_background, .auth_window a.close_auth_window").click(function(){$("#login_popup, #only_auth_users_allowed_popup").hide()}),jQuery(".user_info").hover(function(){jQuery(this).find(".logout-link").fadeIn()},function(){jQuery(this).find(".logout-link").fadeOut()}),function(){if(jQuery("#ratingWidgetTableTitle").length>0){var position=jQuery("#ratingWidgetTableTitle").position();$("#ratingWidgetHelp").css({top:position.top+50+"px",left:position.left+100+"px"}),jQuery("#ratingWidgetTableTitle").hover(function(){$("#ratingWidgetHelp").stop(!0,!0).fadeIn()},function(){$("#ratingWidgetHelp").stop(!0,!0).fadeOut()})}$("form").sisyphus({onRestore:function(){$("#forum_question_subject").length>0&&expand_forum_question_textarea()}})}(),window.onload=function(){window.setTimeout(function(){win_height=getWindowHeight();var loc=window.location.protocol+"//"+window.location.hostname;if(jQuery("#social_buttons").html('<div class="g-plusone" data-size="medium" data-href="'+loc+'"></div><br/>'+'<iframe  class="fb-like-frame" src="'+"http://www.facebook.com/plugins/like.php?href="+encodeURIComponent(loc).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")+"&amp;layout=button_count&amp;show_faces=false&amp;width=150&amp;locale=en_US&amp;"+'action=like&amp;font&amp;colorscheme=light&amp;height=21"'+"></iframe>"),load("https://apis.google.com/js/plusone.js"),jQuery("#like_for_concrete_post").length>0){var loc2=encodeURIComponent(loc+"/"+window.location.pathname).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+");jQuery("#like_for_concrete_post").html('<iframe  class="fb-like-frame fb-like-frame-box" src="http://www.facebook.com/plugins/like.php?href='+loc2+"&amp;layout=box_count&amp;show_faces=false&amp;width=150&amp;locale=en_US&amp;"+'action=like&amp;font&amp;colorscheme=light&amp;height=21"'+"></iframe>"),jQuery("#plusone_for_concrete_post").html('<div class="g-plusone" data-size="tall" data-href="'+loc+"/"+window.location.pathname+'"></div>')}},3e3)};
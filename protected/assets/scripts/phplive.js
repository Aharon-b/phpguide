function getCode(){var code=ace_editor.getSession().getValue();return $("#sandboxarea").val(code),code}function setCode(code){$("#sandboxarea").val(code),aced_editor.getSession().setValue(code)}function run_live_code(){getCode()!=last_urled_code&&reset_code_url(),actual_run_code()}function actual_run_code(){return""==$.trim(getCode())?!1:(document.forms.sandboxform.submit(),void 0)}function generate_code_url(){var code=$.trim(getCode());if(""==code)return!1;$("#code_get_link").hide(),$("#code_url_loader").css("display","inline");var csrf=$('input[name="YII_CSRF_TOKEN"]').val();in_request=!0,$.post("Phplive/storecode",{code:code,YII_CSRF_TOKEN:csrf},receive_generated_url)}function receive_generated_url(response){var code_id=parseInt(response);isNaN(code_id)?(reset_code_url(),alert("Error generating code's link")):set_codes_url((""+document.location).replace("#","").replace(window.location.search,"")+"?code="+code_id)}function check_code_from_hash(){var hash=document.location.hash;"code:"==hash.substr(1,5)&&(setCode(base64_decode(hash.substr(6))),document.location.hash="#"),actual_run_code()}function set_codes_url(url){$("#code_get_link").hide(),$("#code_url_loader").hide(),$("#code_url").html(url),$("#code_url").css("display","inline")}function reset_code_url(){$("#code_get_link").css("display","inline"),$("#code_url").hide()}function dropData(){var content=$("#xmlFrame")[0].contentWindow.document.body.innerHTML;content=content.split(";;;;;;;;;;;;;;;;;;;;;;;;;"),delete content[content.length-1],$("#sandboxresponse").html(nl2br(content.join("")))}function utf8_decode(str_data){var tmp_arr=[],i=0,ac=0,c1=0,c2=0,c3=0;for(str_data+="";str_data.length>i;)c1=str_data.charCodeAt(i),128>c1?(tmp_arr[ac++]=String.fromCharCode(c1),i++):c1>191&&224>c1?(c2=str_data.charCodeAt(i+1),tmp_arr[ac++]=String.fromCharCode((31&c1)<<6|63&c2),i+=2):(c2=str_data.charCodeAt(i+1),c3=str_data.charCodeAt(i+2),tmp_arr[ac++]=String.fromCharCode((15&c1)<<12|(63&c2)<<6|63&c3),i+=3);return tmp_arr.join("")}function base64_decode(data){var o1,o2,o3,h1,h2,h3,h4,bits,b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=0,ac=0,dec="",tmp_arr=[];if(!data)return data;data+="";do h1=b64.indexOf(data.charAt(i++)),h2=b64.indexOf(data.charAt(i++)),h3=b64.indexOf(data.charAt(i++)),h4=b64.indexOf(data.charAt(i++)),bits=h1<<18|h2<<12|h3<<6|h4,o1=255&bits>>16,o2=255&bits>>8,o3=255&bits,tmp_arr[ac++]=64==h3?String.fromCharCode(o1):64==h4?String.fromCharCode(o1,o2):String.fromCharCode(o1,o2,o3);while(data.length>i);return dec=tmp_arr.join(""),dec=this.utf8_decode(dec)}document.domain="phpguide.co.il";var last_urled_code,in_request=!1,ace_editor;$(document).ready(function(){ace_editor=ace.edit("editor"),ace_editor.setTheme("ace/theme/chrome"),ace_editor.getSession().setMode("ace/mode/php"),ace_editor.setShowPrintMargin(!1),ace_editor.getSession().setUseWrapMode(!0),ace_editor.focus(),actual_run_code(),ace_editor.commands.addCommand({name:"execute_on_ctrlenter",bindKey:{win:"Ctrl-Return",mac:"Command-Return"},exec:function(){run_live_code()},readOnly:!0})});